# ============================================
# ELS-LMS Stack - Simplified Configuration
# ============================================

# PostgreSQL Database Configuration
postgres:
  enabled: true
  image:
    repository: postgres
    tag: "15"
    pullPolicy: IfNotPresent
  auth:
    username: postgres
    password: postgres
    database: els_lms
    existingSecret: ""
  service:
    type: ClusterIP
    port: 5432
  persistence:
    enabled: true
    accessModes: ["ReadWriteOnce"]
    size: 1Gi
    storageClassName: "hostpath"
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi
  readinessProbe:
    initialDelaySeconds: 10
    periodSeconds: 5
  livenessProbe:
    initialDelaySeconds: 30
    periodSeconds: 10
# Backend API Server Configuration
els-lmsserver:
  enabled: true
  elslmsserver:
    enabled: true
    name: els-lmsserver
    # image:  harishdell/templeserver
    # tag: "1.12"  # ‚Üê CI updates this
    image: harishdell/els-lmsserver
    tag: "1.15.0"
    imagePullPolicy: IfNotPresent
    containerPort: 1337
    servicePort: 1337
    env:
      HOST: "0.0.0.0"
      PORT: "1337"
      DATABASE_HOST: "els-lms-postgres"
      DATABASE_CLIENT: "postgres"
      DATABASE_PORT: "5432"
      DATABASE_NAME: "elslms"
      DATABASE_USERNAME: "postgres"
      DATABASE_PASSWORD: "postgres"
      #CENTRALIZED_SERVER: "http://els-lmsserver.local"
      PUBLIC_URL: "http://els-lmsserver.local"
      ALLOWED_HOSTS: "localhost,127.0.0.1,els-lmsserver.local,elslms.local,els-lms-api.local,els-lms-ui.local"

  ingress:
    enabled: true
    host: "els-lmsserver.local"
    className: nginx
    annotations:
      nginx.ingress.kubernetes.io/backend-protocol: "HTTP"
      nginx.ingress.kubernetes.io/rewrite-target: /
# Frontend Client Configuration
els-lmsclient:
  enabled: true
  replicaCount: 1
  imagePullPolicy: IfNotPresent
  elslmsclient:
    name: els-lmsclient
    image: harishdell/els-lmsclient
    tag: "1.8"
    containerPort: 80
    servicePort: 80
    env:
      REACT_APP_ABLY_API_KEY: xul13A.CNpeww:KkS0rh8M4rJSr5r4gHNGbMijYuxvr90ybz1UQd6uKpw
      REACT_APP_MAXPAGE: "3"
      REACT_APP_KRUTRIM_API_KEY: 5MG974Dkz5xHQ70hLzyLZQzMO57B5P9Pos1MOYe3
      REACT_APP_GOOGLE_API_KEY: AIzaSyDNN9LVrNB_WOGhrHG0U1CYsTWIOuaaoI8
      REACT_APP_PINCODE: https://emeelan.com/alumniserver/api
      REACT_APP_API_URL: http://els-lmsserver.local/api
  ingress:
    enabled: true
    name: els-lmsclient-ingress
    className: nginx
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /
    paths:
      - path: /
        pathType: Prefix
        service: els-lmsclient-service
        port: 80
els-lms-api:
  image:
    tag: 1.13.2
